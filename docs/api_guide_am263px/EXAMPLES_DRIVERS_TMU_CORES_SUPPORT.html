<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: TMU 4 Cores Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.02.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_TMU_CORES_SUPPORT.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TMU 4 Cores Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2918">Introduction</a></li>
<li class="level1"><a href="#TMU_TCMA_ERRATA">Errata : TCM Memory Corruption on R5SS0_CORE1 and R5SS1_CORE1 when writing to TMU Registers</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_TMU_CORES_SUPPORT_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2919">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2920">Sample Output</a></li>
<li class="level1"><a href="#autotoc_md2921">See Also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_tmu_cores_support"></a></p>
<h1><a class="anchor" id="autotoc_md2918"></a>
Introduction</h1>
<p>This example demonstrates the usage of all four cores by TMU. Additionally, the example also implements Park and Inverse Park Transform which has use cases in high performance drive architectures related to permanent magnet synchronous and asynchronous machines. The implementation of this transform is as follows:</p>
<p><b>Park Transform:</b> </p><pre class="fragment">Isd = Ialpha*cos(theta) + Ibeta*sin(theta)
Isq = -Ialpha*sin(theta) + Ibeta*cos(theta)
</pre><p><b>Inverse Park Transform</b> </p><pre class="fragment">Ialpha = Isd*cos(theta) - Isq*sin(theta)
Ibeta = Isd*sin(theta) + Iq*cos(theta)
</pre><p>Ialpha = Stationary d-axis stator current</p>
<p>Ibeta = Stationary q-axis stator current</p>
<p>Isd = Rotating d-axis stator current</p>
<p>Isq = Rotating q-axis stator current</p>
<p>theta = Rotating angle in per unit</p>
<p>To implement the trigonometric function calls, TMU specific operations have been put into use as TMU have better performance in comparison to the C mathlib supported trigonometric function calls. This example can be run parallely on all four cores supported by the chip, due to it's multi-core functionality</p>
<h1><a class="anchor" id="TMU_TCMA_ERRATA"></a>
Errata : TCM Memory Corruption on R5SS0_CORE1 and R5SS1_CORE1 when writing to TMU Registers</h1>
<p>In AM263Px, the writes to TMU (TMU instance of core 1, in each cluster) corrupt the TCMA of the respective cores. That is, the writes TMU registers offset from 0x40 to 0x3A0 of TMU, will be reflected on the TCMA offsets 0x40 to 0x3A0.</p>
<p>The code / data present in the TCMA of these cores will be corrupted upon using these TMUs. Hence the following workaround is proposed: If the TMUs of Cores 1 are being used, their respective TCMAs should be blocked from 0x40 to 0x3A0. This workaround is implemented in the example <a class="el" href="EXAMPLES_DRIVERS_TMU_CORES_SUPPORT.html">TMU 4 Cores Support</a>. Please refer Memory sections of the example's syscfg.</p>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_TMU_CORES_SUPPORT_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" rowspan="4">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss0-1 nortos   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">r5fss1-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">r5fss1-1 nortos   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am263px-cc, am263px-lp   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/tmu/tmu_cores_support/   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2919"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
<li>View the console log for results</li>
</ul>
<h1><a class="anchor" id="autotoc_md2920"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">[Cortex_R5_0] TMU Cores Support Test Started ...</div>
<div class="line">Park Transform value : 500.000000 , 400.000000</div>
<div class="line">Inverse Park Transform value : 150.000000 , 275.000000</div>
<div class="line">TMU Cores Support Test Passed ...</div>
<div class="line">All tests have passed!! ...</div>
<div class="line">[Cortex_R5_1] TMU Cores Support Test Started ...</div>
<div class="line">Park Transform value : 500.000000 , 400.000000</div>
<div class="line">Inverse Park Transform value : 150.000000 , 275.000000</div>
<div class="line">TMU Cores Support Test Passed ...</div>
<div class="line">All tests have passed!! ...</div>
<div class="line">[Cortex_R5_2] TMU Cores Support Test Started ...</div>
<div class="line">Park Transform value : 500.000000 , 400.000000</div>
<div class="line">Inverse Park Transform value : 150.000000 , 275.000000</div>
<div class="line">TMU Cores Support Test Passed ...</div>
<div class="line">All tests have passed!! ...</div>
<div class="line">[Cortex_R5_3] TMU Cores Support Test Started ...</div>
<div class="line">Park Transform value : 500.000000 , 400.000000</div>
<div class="line">Inverse Park Transform value : 150.000000 , 275.000000</div>
<div class="line">TMU Cores Support Test Passed ...</div>
<div class="line">All tests have passed!! ...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2921"></a>
See Also</h1>
<ul>
<li><a class="el" href="MATHLIB_DRIVER.html#TMU_LIBRARY">TMU library</a></li>
<li><a class="el" href="TMU_GUIDE.html">Trigonometric Math Unit Guide</a></li>
<li><a class="el" href="group__DRV__TMU__MODULE.html">APIs for TMU</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
