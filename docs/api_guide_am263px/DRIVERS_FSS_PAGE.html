<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: FSS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.02.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('DRIVERS_FSS_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FSS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md927">Usage of FSS driver</a></li>
<li class="level1"><a href="#autotoc_md928">Example Usage</a><ul><li class="level2"><a href="#autotoc_md929">Configuring FSS for Bootseg peripheral</a></li>
<li class="level2"><a href="#autotoc_md930">Configuring FSS for ECCM</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md931">API</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_drivers_fss"></a></p>
<h1><a class="anchor" id="autotoc_md927"></a>
Usage of FSS driver</h1>
<p>FSS driver is used to configure bootseg IP and ECCM IP.</p>
<p>Bootseg IP is used to perform A/B swap in Firmware-Update-Over-The-Air (FOTA) application. Please refer to Technical Resource Manual of the deivce for more details of this IP.</p>
<p>ECCM is on-the-fly-Ecc module which perform ECC check on the fly which makes XIP from external flash secure. Please refer to Technical Resource Manual of the deivce for more details of this IP.</p>
<h1><a class="anchor" id="autotoc_md928"></a>
Example Usage</h1>
<h2><a class="anchor" id="autotoc_md929"></a>
Configuring FSS for Bootseg peripheral</h2>
<p>Includes the following files</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;drivers/fss.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;drivers/hw_include/cslr_fss.h&gt;</span></div>
</div><!-- fragment --><p> Initilize the following struct</p>
<div class="fragment"><div class="line">    <a class="code" href="structFSS__Config.html">FSS_Config</a> fssConf;</div>
<div class="line">    <span class="comment">/* IP base addrress is defined in the CSL files */</span></div>
<div class="line">    fssConf.<a class="code" href="structFSS__Config.html#ae3369aeadf5b10470d4f2eb8e0c84165">ipBaseAddress</a> = CSL_MSS_CTRL_U_BASE;</div>
<div class="line">    <span class="comment">/* Assume that size of external flash is 32MB */</span></div>
<div class="line">    fssConf.<a class="code" href="structFSS__Config.html#a87882e19b071650d1a455588d643b914">extFlashSize</a> = 32 * 1024 * 1024;;</div>
</div><!-- fragment --><p> Note that, ipBaseAddress address is in CSLR file.</p>
<p>To remap 2nd half of flash to 1st half of the flash (or boot from 2nd half of flash.)</p>
<div class="fragment"><div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(<a class="code" href="group__DRV__FSS__MODULE.html#ga6d89175d542ccb51518c77221543a014">FSS_selectRegionB</a>(&amp;fssConf) == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
</div><!-- fragment --><p> To boot from 1st half of flash,</p>
<div class="fragment"><div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(<a class="code" href="group__DRV__FSS__MODULE.html#gaf35dd2cb3ba1a9b8935cad7e5483b9f7">FSS_selectRegionA</a>(&amp;fssConf) == <a class="code" href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a>);</div>
</div><!-- fragment --><p> Somtimes, it is requried to find from which part of flash, application boots from. Following code snippet shows that:</p>
<div class="fragment"><div class="line">    uint32_t bootRegion = <a class="code" href="group__DRV__FSS__MODULE.html#gaff9a02d813ef5e11bfe05cbd2a09273c">FSS_getBootRegion</a>(&amp;fssConf);</div>
<div class="line">    <span class="keywordflow">if</span>(1U == bootRegion)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;Booting from 2nd half of flash (or B region).&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;Booting from 1st half of flash (or A region).&quot;</span>);</div>
<div class="line">    }</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md930"></a>
Configuring FSS for ECCM</h2>
<div class="fragment"><div class="line">    <a class="code" href="structFSS__ECCRegionConfig.html">FSS_ECCRegionConfig</a> region;</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        ECCM IP can config 4 regions. Index is to indicate</span></div>
<div class="line"><span class="comment">        for which region this config is for.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    region.<a class="code" href="structFSS__ECCRegionConfig.html#a38a9c33c3efdd5624a505bb345575a89">regionIndex</a> = 0;</div>
<div class="line">    region.<a class="code" href="structFSS__ECCRegionConfig.html#a603f8e6077f5c5f935b47306da8fe5be">size</a> = 1 * 1024 * 1024;</div>
<div class="line">    region.<a class="code" href="structFSS__ECCRegionConfig.html#a7fa611c5706630d84da12dbd70738868">startAddress</a> = 16 * 1024;</div>
<div class="line">    <span class="comment">/* disable ECC initially */</span></div>
<div class="line">    <a class="code" href="group__DRV__FSS__MODULE.html#gaa769d9cb2f81cf0d26c6995df8d44d2d">FSS_disableECC</a>();</div>
<div class="line">    <a class="code" href="group__DRV__FSS__MODULE.html#ga3e86c47b8477423956175589115b0014">FSS_configECCMRegion</a>(&amp;region);</div>
<div class="line">    <a class="code" href="group__DRV__FSS__MODULE.html#ga936f9e2a951d31629a0af31aeb2f2fdc">FSS_enableECC</a>();</div>
</div><!-- fragment --><p> make sure to disable ECC before configuring it.</p>
<h1><a class="anchor" id="autotoc_md931"></a>
API</h1>
<p><a class="el" href="group__DRV__FSS__MODULE.html">APIs for FSS</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="astructFSS__Config_html"><div class="ttname"><a href="structFSS__Config.html">FSS_Config</a></div><div class="ttdef"><b>Definition:</b> fss.h:92</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_ga3e86c47b8477423956175589115b0014"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#ga3e86c47b8477423956175589115b0014">FSS_configECCMRegion</a></div><div class="ttdeci">int32_t FSS_configECCMRegion(FSS_ECCRegionConfig *parameter)</div><div class="ttdoc">Configure en ECCM Region.</div></div>
<div class="ttc" id="astructFSS__ECCRegionConfig_html_a603f8e6077f5c5f935b47306da8fe5be"><div class="ttname"><a href="structFSS__ECCRegionConfig.html#a603f8e6077f5c5f935b47306da8fe5be">FSS_ECCRegionConfig::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> fss.h:85</div></div>
<div class="ttc" id="astructFSS__ECCRegionConfig_html_a38a9c33c3efdd5624a505bb345575a89"><div class="ttname"><a href="structFSS__ECCRegionConfig.html#a38a9c33c3efdd5624a505bb345575a89">FSS_ECCRegionConfig::regionIndex</a></div><div class="ttdeci">uint32_t regionIndex</div><div class="ttdef"><b>Definition:</b> fss.h:87</div></div>
<div class="ttc" id="astructFSS__Config_html_ae3369aeadf5b10470d4f2eb8e0c84165"><div class="ttname"><a href="structFSS__Config.html#ae3369aeadf5b10470d4f2eb8e0c84165">FSS_Config::ipBaseAddress</a></div><div class="ttdeci">uint32_t ipBaseAddress</div><div class="ttdef"><b>Definition:</b> fss.h:93</div></div>
<div class="ttc" id="astructFSS__ECCRegionConfig_html"><div class="ttname"><a href="structFSS__ECCRegionConfig.html">FSS_ECCRegionConfig</a></div><div class="ttdef"><b>Definition:</b> fss.h:84</div></div>
<div class="ttc" id="astructFSS__ECCRegionConfig_html_a7fa611c5706630d84da12dbd70738868"><div class="ttname"><a href="structFSS__ECCRegionConfig.html#a7fa611c5706630d84da12dbd70738868">FSS_ECCRegionConfig::startAddress</a></div><div class="ttdeci">uint32_t startAddress</div><div class="ttdef"><b>Definition:</b> fss.h:86</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_gafe348ab5badd2c15118f95e21bb192c6"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a></div><div class="ttdeci">#define DebugP_log(format,...)</div><div class="ttdoc">Function to log a string to the enabled console.</div><div class="ttdef"><b>Definition:</b> DebugP.h:235</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_ga6d89175d542ccb51518c77221543a014"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#ga6d89175d542ccb51518c77221543a014">FSS_selectRegionB</a></div><div class="ttdeci">int32_t FSS_selectRegionB(FSS_Handle handle)</div><div class="ttdoc">Map region N of flash to initial position.</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_gaa769d9cb2f81cf0d26c6995df8d44d2d"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#gaa769d9cb2f81cf0d26c6995df8d44d2d">FSS_disableECC</a></div><div class="ttdeci">void FSS_disableECC(void)</div><div class="ttdoc">Disable ECC.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__SYSTEM_html_ga47e638d7c694e6d42e57b96b071b8a6f"><div class="ttname"><a href="group__KERNEL__DPL__SYSTEM.html#ga47e638d7c694e6d42e57b96b071b8a6f">SystemP_SUCCESS</a></div><div class="ttdeci">#define SystemP_SUCCESS</div><div class="ttdoc">Return status when the API execution was successful.</div><div class="ttdef"><b>Definition:</b> SystemP.h:56</div></div>
<div class="ttc" id="astructFSS__Config_html_a87882e19b071650d1a455588d643b914"><div class="ttname"><a href="structFSS__Config.html#a87882e19b071650d1a455588d643b914">FSS_Config::extFlashSize</a></div><div class="ttdeci">uint32_t extFlashSize</div><div class="ttdef"><b>Definition:</b> fss.h:94</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_gaff9a02d813ef5e11bfe05cbd2a09273c"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#gaff9a02d813ef5e11bfe05cbd2a09273c">FSS_getBootRegion</a></div><div class="ttdeci">uint32_t FSS_getBootRegion(FSS_Handle handle)</div><div class="ttdoc">Which boot region is been selected.</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_ga552e9055ca7eab5fe6c224c6cd5a9d4c"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a></div><div class="ttdeci">#define DebugP_assert(expression)</div><div class="ttdoc">Function to call for assert check.</div><div class="ttdef"><b>Definition:</b> DebugP.h:187</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_ga936f9e2a951d31629a0af31aeb2f2fdc"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#ga936f9e2a951d31629a0af31aeb2f2fdc">FSS_enableECC</a></div><div class="ttdeci">void FSS_enableECC(void)</div><div class="ttdoc">Enable ECC for Flash.</div></div>
<div class="ttc" id="agroup__DRV__FSS__MODULE_html_gaf35dd2cb3ba1a9b8935cad7e5483b9f7"><div class="ttname"><a href="group__DRV__FSS__MODULE.html#gaf35dd2cb3ba1a9b8935cad7e5483b9f7">FSS_selectRegionA</a></div><div class="ttdeci">int32_t FSS_selectRegionA(FSS_Handle handle)</div><div class="ttdoc">Map region A of flash to initial position.</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
