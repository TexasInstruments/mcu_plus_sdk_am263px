<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: EPWM Digital counter compare capture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_EPWM_DCCAP.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EPWM Digital counter compare capture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2386">Introduction:</a></li>
<li class="level1"><a href="#autotoc_md2387">Example Description</a></li>
<li class="level1"><a href="#autotoc_md2388">Configurations</a></li>
<li class="level1"><a href="#autotoc_md2389">External Connections</a><ul><li class="level2"><a href="#autotoc_md2390">AM263Px-CC or AM261x-SOM</a></li>
<li class="level2"><a href="#autotoc_md2391">AM263Px-LP</a></li>
<li class="level2"><a href="#autotoc_md2392">AM261x-LP</a></li>
</ul>
</li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_EPWM_DCCAP_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2393">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2394">See Also</a></li>
<li class="level1"><a href="#autotoc_md2395">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_epwm_dccap"></a></p>
<h1><a class="anchor" id="autotoc_md2386"></a>
Introduction:</h1>
<p>The EPWM Edge Detection in DCCAP is a feature to monitor the trip input to be present in a given window. A typical usecase would when the EPWMs are used for controlling a motor, then the expected high current pushes in the initial switching time is expected and if they are not present, then, there is some issue with system and the EPWMs need to to be tripped.</p>
<p> <style>div.image img[src="am263_epwm_dccap_flow.png"]{ width:60%}</style> </p><div class="image">
<img src="am263_epwm_dccap_example_flow.png" alt=""/>
<div class="caption">
Flow Chart</div></div>
<h1><a class="anchor" id="autotoc_md2387"></a>
Example Description</h1>
<p>This example showcases the configurations needed to use the Edge Detection feature in the DCCAP to detect occurrence of a trip event in a configured time window. The window is configured by MIN and MAX values configured in MINMAX register set. Purpose of this window is to detect the occurrence of such edge. If no such edge occurs, this module will generate a trip event as well as interrupt configurable by user.</p>
<p>EPMW0_A (EPWM2_A in case of AM261x-LP) to detect the trip within a MINMAX window and trip its EPWMxA output EPMW1_A waveform is used as a trip input.</p>
<h1><a class="anchor" id="autotoc_md2388"></a>
Configurations</h1>
<ol type="1">
<li>EPWM0 (EPWM2 in case of AM261x-LP)<ul>
<li>DCCAP is enabled, trip inputs are configured for Trip1.</li>
<li>waveform A/B are configured (in the example) to match the min-max window for observing.</li>
<li>IN Trip zone, CAPEVT is configured for CBC source and Trip action on output A to low Action when trip occured.</li>
<li>XCMP is enbaled for this feature usage.</li>
</ul>
</li>
<li>EPWM1<ul>
<li>XCMP is enabled (not a necessary requirement)</li>
<li>generates a waveform, that goes high on counter = 100, goes low on counter = 1000, for a period of 2000</li>
</ul>
</li>
<li>PWMXbar 0 to take GPIO45 via Inputxbar (a common pin that has EPWM 1A output)</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>The EPWM1A is routed internally via GPIO. if wish to use a different/external trip input, then,<ol type="1">
<li>remove EPWM 1A configuration (either pinmux or all configurations from syscfg)</li>
<li>Add GPIO45 as a input pin.</li>
<li>connect external trip input to GPIO45 <br  />
</li>
</ol>
</dd></dl>
<h1><a class="anchor" id="autotoc_md2389"></a>
External Connections</h1>
<p>EPWM0_A/B (EPWM2_A/B in case of AM261x-LP) and EPWM1_A pin can be connected to an oscilloscope to view the waveform.</p>
<h2><a class="anchor" id="autotoc_md2390"></a>
AM263Px-CC or AM261x-SOM</h2>
<p>When using AM263Px-CC or AM261x-SOM with MDSHSECDOCK (HSEC180 controlCARD Baseboard Docking Station)</p><ul>
<li>EPWM0A can be observed on HSEC PIN 49</li>
<li>EPWM0B can be observed on HSEC PIN 51</li>
<li>EPWM1A (Trip Input) can be observed on HSEC PIN 53.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2391"></a>
AM263Px-LP</h2>
<p>Probe the following on boosterpack</p><ul>
<li>EPWM0A can be observed on J2/J4 pin 11</li>
<li>EPWM0B can be observed on J6/J8 pin 59</li>
<li>EPWM1A (Trip Input) can be observed on J2/J4 pin 37</li>
</ul>
<h2><a class="anchor" id="autotoc_md2392"></a>
AM261x-LP</h2>
<p>Probe the following on boosterpack</p><ul>
<li>EPWM2A can be observed on J2/J4 pin 40</li>
<li>EPWM2B can be observed on J2/J4 pin 39</li>
<li>EPWM1A (Trip Input) can be observed on J5/J7 pin 69</li>
</ul>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_EPWM_DCCAP_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Board  </td><td class="markdownTableBodyNone">am263px-cc   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/epwm/epwm_dccap   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2393"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2394"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_EPWM_PAGE.html">EPWM</a></p>
<h1><a class="anchor" id="autotoc_md2395"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">EPWM Capture Logic Test Started ...</div>
<div class="line">minValue : 10   maxValue : 60</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 1</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">minValue : 10   maxValue : 160</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 0</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">minValue : 60   maxValue : 110</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 0</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">minValue : 60   maxValue : 210</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 0</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">minValue : 110  maxValue : 160</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 1</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">minValue : 160  maxValue : 210</div>
<div class="line">INPUT_WAVEFORM_RISING_EDGE_COUNTER_VALUE : 100</div>
<div class="line">CAPEVT Status = 1</div>
<div class="line">DCCAP Status = 1</div>
<div class="line"> </div>
<div class="line">EPWM Capture Logic Test Passed!!</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --><p> <style>div.image img[src="am263p_epwm_dccap_output.png"]{ width:60%}</style> </p><div class="image">
<img src="am263p_epwm_dccap_output.png" alt=""/>
<div class="caption">
EPWM DCCAP Edge Monitoring Sample output</div></div>
<p> <style>div.image img[src="am263p_epwm_dccap_minWindow_greater_than_edge.png"]{ width:60%}</style> </p><div class="image">
<img src="am263p_epwm_dccap_minWindow_greater_than_edge.png" alt=""/>
<div class="caption">
when edge is before minimum value of the window</div></div>
<p> <style>div.image img[src="am263p_epwm_dccap_maxWindow_lesser_than_edge.png"]{ width:60%}</style> </p><div class="image">
<img src="am263p_epwm_dccap_maxWindow_lesser_than_edge.png" alt=""/>
<div class="caption">
when edge is after the maximum value of the window</div></div>
<p> <style>div.image img[src="am263p_epwm_dccap_edge_in_range.png"]{ width:60%}</style> </p><div class="image">
<img src="am263p_epwm_dccap_edge_in_range.png" alt=""/>
<div class="caption">
when edge is in the minimum and maximum value range of the window</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
