<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: ECAP Signal Monitoring Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_ECAP_SIGNAL_MONITORING.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ECAP Signal Monitoring Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md2370">Introduction</a><ul><li class="level2"><a href="#autotoc_md2371">ECAP Signal Monitoring</a></li>
<li class="level2"><a href="#autotoc_md2372">Example Description</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md2373">External Connections</a><ul><li class="level2"><a href="#autotoc_md2374">AM263PX-CC or AM261X-SOM</a></li>
<li class="level2"><a href="#autotoc_md2375">AM263PX-LP or AM261X-LP</a></li>
</ul>
</li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_ECAP_SIGNAL_MONITORING_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md2376">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md2377">See Also</a></li>
<li class="level1"><a href="#autotoc_md2378">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_ecap_signal_monitoring"></a></p>
<h1><a class="anchor" id="autotoc_md2370"></a>
Introduction</h1>
<h2><a class="anchor" id="autotoc_md2371"></a>
ECAP Signal Monitoring</h2>
<p>Each ECAP instance is equipped with 2 signal monitoring units. These signal monitoring units can be configured in one of the 4 following modes.</p><ol type="1">
<li>High Pulse Monitoring Mode -&gt; Rising to Falling</li>
<li>Low Pulse Monitoring Mode -&gt; Falling to Rising</li>
<li>Period Monitoring, Rise edge to Rise edge -&gt; Rising to Rising</li>
<li>Period Monitoring, Fall edge to Fall edge -&gt; Falling to Falling.</li>
<li>Edge Monitoring ( Posedge ) -&gt; Rising Edge : Sync in is mandatory for this mode</li>
</ol>
<ol type="1">
<li>Edge Monitoring ( Negedge ) -&gt; Rising Edge : Sync in is mandatory for this mode</li>
</ol>
<p>For each mode, the CAPEVTs and Stop/Wrap are configured respectively. The Input signal is captured and monitored between Min and Max registers against the Counter value captured with the CAPEVT for the respective mode. Also, these Min and Max registers are 32bit values contain Active-Shadow set. The Shadow to Active loading can be selected to be triggered by either</p><ul>
<li>a Sync event or</li>
<li>a Global Load Strobe event.</li>
</ul>
<p>Debug Mode is present, for when enabled, the events occuring in the min-max window ranges, the minimum and maximum values within the noted min-max window are captured and stored per monitoring unit.</p>
<p> <style>div.image img[src="am263p_ecap_signal_monitoring.png"]{width:100%}</style> </p><div class="image">
<img src="am263p_ecap_signal_monitoring.png" alt=""/>
<div class="caption">
ECAP Signal Monitoring Summary</div></div>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li>The ECAP should be in Absolute mode where no CAPEVT reset the counters for the signal monitoring to be working.</li>
<li>For Edge Monitoring, there needs to be a Sync pulse from an EPWM to reset the monitoring but not restart.</li>
<li>For Pulse or Peroid Monitoring there should not be a Sync in enabled.</li>
<li>The error1 and error2 are used for min window violation error and max window violation error in the monitoring. once these are set, in order to restart the monitoring, one needs to re-enable the monitoring unit and start timestamping on ecap.</li>
<li>On the Edge monitoring modes, the error1 is set for min or max window violation. the error2 is set if there is never an edge between two sync events. For every sync pulse, the edge monitoring restarts.</li>
</ol>
</dd></dl>
<h2><a class="anchor" id="autotoc_md2372"></a>
Example Description</h2>
<p>This example configures 3 ECAP moudule, with a total of 6 signal monitoring modules, each with one configuration that are supported. All ECAPs are enabled with Interrupts for the Errors from the Signal Monitoring Modules. An EPWM is configured to provide the input, routed to ECAP via GPI and Inputxbar. This input is varied in a way to cross min and max values from the siganl monitoring modules and the application checks for the interrupt flags are well as the debug range values.</p>
<h1><a class="anchor" id="autotoc_md2373"></a>
External Connections</h1>
<h2><a class="anchor" id="autotoc_md2374"></a>
AM263PX-CC or AM261X-SOM</h2>
<p>No external connection is required.</p>
<h2><a class="anchor" id="autotoc_md2375"></a>
AM263PX-LP or AM261X-LP</h2>
<p>No external connection is required.</p>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_ECAP_SIGNAL_MONITORING_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am263px-cc, am263px-lp   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/ecap/ecap_capture_pwm/   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2376"></a>
Steps to Run the Example</h1>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Establish connections as mentioned in External Connections section</li>
<li>Launch a CCS debug session and run the executable, see <a class="el" href="CCS_LAUNCH_PAGE.html">CCS Launch, Load and Run</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2377"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_ECAP_PAGE.html">ECAP</a></p>
<h1><a class="anchor" id="autotoc_md2378"></a>
Sample Output</h1>
<p>Shown below is a sample output when the application is run,</p>
<div class="fragment"><div class="line">ECAP Signal Monitoring Test Test Started ...</div>
<div class="line">Currently the Input waveform is having all the properties in expected state</div>
<div class="line"> </div>
<div class="line">Pulse Width is modified to exceed bounds</div>
<div class="line">----------------------------------------</div>
<div class="line">    HIGH PULSE Min Bound : 9950 HIGH PULSE Max Bound : 10050    Configured High Pulse Width : 10100</div>
<div class="line">    Observed Min Width : 10000  Observed Max Width : 10050</div>
<div class="line"> </div>
<div class="line">    LOW PULSE Min Bound  : 9950 LOW PULSE Max Bound  : 10050    Configured low Pulse Width  : 9899</div>
<div class="line">    Observed Min Width : 9949   Observed Max Width : 10000</div>
<div class="line"> </div>
<div class="line">Edge Position is modified to exceed bounds</div>
<div class="line">------------------------------------------</div>
<div class="line">    Posedge Min Bound : 4899    Posedge Max Bound : 5099    Configured Posedge Position : 4849</div>
<div class="line">    Observed Min Value : 4900   Observed Max Value : 5004</div>
<div class="line"> </div>
<div class="line">    Negedge Min Bound : 14899   Negedge Max Bound : 15099   Configured Negedge Position : 15149</div>
<div class="line">    Observed Min Value : 15004  Observed Max Value : 15100</div>
<div class="line"> </div>
<div class="line">Period is modified to exceed bounds</div>
<div class="line">-----------------------------------</div>
<div class="line">    Period Min Bound : 19949    Period Max Bound : 20049    Configured Period : 20149</div>
<div class="line">    Observed Min Value on High Period Monitor : 19999   Observed Max Value on High Period Monitor : 20050</div>
<div class="line">    Observed Min Value on Low Period Monitor : 19999    Observed Max Value on Low Period Monitor : 20050</div>
<div class="line">ECAP Signal Monitoring Test Passed!!</div>
<div class="line">All tests have passed!!</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
