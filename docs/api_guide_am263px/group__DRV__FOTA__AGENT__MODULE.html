<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: APIs for FOTA Agent</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__DRV__FOTA__AGENT__MODULE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">APIs for FOTA Agent<div class="ingroups"><a class="el" href="group__DRV__MODULE.html">APIs for SOC Specific Device Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Introduction</h2>
<p>This module contains APIs to program and use the FOTA Agent driver. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:fota__agent_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fota__agent_8h.html">fota_agent.h</a></td></tr>
<tr class="memdesc:fota__agent_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">FOTA Agent Driver API/interface file. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFOTAAgent__Params.html">FOTAAgent_Params</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">FOTA Agent Driver Handle.  <a href="structFOTAAgent__Params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2273801f09fb433a8700f205d1426694"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga2273801f09fb433a8700f205d1426694">FOTAAgent_Params_init</a> (<a class="el" href="structFOTAAgent__Params.html">FOTAAgent_Params</a> *params)</td></tr>
<tr class="memdesc:ga2273801f09fb433a8700f205d1426694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initilize params with default values.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga2273801f09fb433a8700f205d1426694">More...</a><br /></td></tr>
<tr class="separator:ga2273801f09fb433a8700f205d1426694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04ca998706ec4048975bd5636d131806"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga04ca998706ec4048975bd5636d131806">FOTAAgent_init</a> (<a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *pHandle, <a class="el" href="structFOTAAgent__Params.html">FOTAAgent_Params</a> *params)</td></tr>
<tr class="memdesc:ga04ca998706ec4048975bd5636d131806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initilize FOTA Agent API.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga04ca998706ec4048975bd5636d131806">More...</a><br /></td></tr>
<tr class="separator:ga04ca998706ec4048975bd5636d131806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c072eb352e67202f76b13ea3185eeeb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga2c072eb352e67202f76b13ea3185eeeb">FOTAAgent_writeStart</a> (<a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *pHandle, uint32_t wrOffset, char doFlashSegments)</td></tr>
<tr class="memdesc:ga2c072eb352e67202f76b13ea3185eeeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logically start writes and initilize state internal machine.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga2c072eb352e67202f76b13ea3185eeeb">More...</a><br /></td></tr>
<tr class="separator:ga2c072eb352e67202f76b13ea3185eeeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f5d32e09eb6f3a7eb072c62322385d0"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga5f5d32e09eb6f3a7eb072c62322385d0">FOTAAgent_writeUpdate</a> (<a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *pHandle, uint8_t *buf, uint32_t size)</td></tr>
<tr class="memdesc:ga5f5d32e09eb6f3a7eb072c62322385d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update internal machine with new data.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga5f5d32e09eb6f3a7eb072c62322385d0">More...</a><br /></td></tr>
<tr class="separator:ga5f5d32e09eb6f3a7eb072c62322385d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b20292fd4af78e4b811fd336cc0881b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga9b20292fd4af78e4b811fd336cc0881b">FOTAAgent_writeEnd</a> (<a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *pHandle)</td></tr>
<tr class="memdesc:ga9b20292fd4af78e4b811fd336cc0881b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logically end writes and end the state machine.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga9b20292fd4af78e4b811fd336cc0881b">More...</a><br /></td></tr>
<tr class="separator:ga9b20292fd4af78e4b811fd336cc0881b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0575464a87b442e9021cb90c9ad2daa5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga0575464a87b442e9021cb90c9ad2daa5">FOTAAgent_getFLSOPSKDHandle</a> (<a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *pHandle, <a class="el" href="structFLSOPSKD__Handle.html">FLSOPSKD_Handle</a> *flsopskdHandle)</td></tr>
<tr class="memdesc:ga0575464a87b442e9021cb90c9ad2daa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrive FLSOPSKD handle.  <a href="group__DRV__FOTA__AGENT__MODULE.html#ga0575464a87b442e9021cb90c9ad2daa5">More...</a><br /></td></tr>
<tr class="separator:ga0575464a87b442e9021cb90c9ad2daa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9b04b08fa9b040d5081b0767d3f6ec5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DRV__FOTA__AGENT__MODULE.html#ga9b04b08fa9b040d5081b0767d3f6ec5d">FOTAAGENT_WRITEOFFSET_DNC</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="separator:ga9b04b08fa9b040d5081b0767d3f6ec5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga9b04b08fa9b040d5081b0767d3f6ec5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b04b08fa9b040d5081b0767d3f6ec5d">&#9670;&nbsp;</a></span>FOTAAGENT_WRITEOFFSET_DNC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FOTAAGENT_WRITEOFFSET_DNC&#160;&#160;&#160;(0U)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2273801f09fb433a8700f205d1426694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2273801f09fb433a8700f205d1426694">&#9670;&nbsp;</a></span>FOTAAgent_Params_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_Params_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Params.html">FOTAAgent_Params</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initilize params with default values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>pointer to parameter struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
<a id="ga04ca998706ec4048975bd5636d131806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04ca998706ec4048975bd5636d131806">&#9670;&nbsp;</a></span>FOTAAgent_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Params.html">FOTAAgent_Params</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initilize FOTA Agent API. </p>
<p>This API initilize FOTA agent and underneath modules.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to FOTA Agent handle </td></tr>
    <tr><td class="paramname">params</td><td>pointer to parameter struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
<a id="ga2c072eb352e67202f76b13ea3185eeeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c072eb352e67202f76b13ea3185eeeb">&#9670;&nbsp;</a></span>FOTAAgent_writeStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_writeStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wrOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>doFlashSegments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logically start writes and initilize state internal machine. </p>
<p>Currently, FOTAAgent only support binary file of format .mcelf and .mcelf_xip. if file type is mcelf_xip then doFlashSegments is TRUE else it is FALSE. doFlashSegments here signals to parse the file, extracts the data segments and only flash those data segments, instead of entire file.</p>
<p>In case doFlashSegments is TRUE, wrOffset argument is ignored as this information is stored inside the file. However, wrOffset information needs to be provided explicitly given via wrOffset argument.</p>
<p>wrOffset argument is the offset (in bytes) at which file needs to be written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to FOTA Agent handle </td></tr>
    <tr><td class="paramname">wrOffset</td><td>flash offset at which file to write </td></tr>
    <tr><td class="paramname">doFlashSegments</td><td>flash data segments only instead of entire file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
<a id="ga5f5d32e09eb6f3a7eb072c62322385d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f5d32e09eb6f3a7eb072c62322385d0">&#9670;&nbsp;</a></span>FOTAAgent_writeUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_writeUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update internal machine with new data. </p>
<p>Update internal state machine with new data. Its not that on providing every one byte this function will write to flash. Flash constraints on erase size. For exmaple, if erase is sector wise of 4096 bytes (as specified in params) then in that case, this function will wait for this amount of data to be recieved and then send it to the flash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to FOTA Agent handle </td></tr>
    <tr><td class="paramname">buf</td><td>pointer to buffer with the data </td></tr>
    <tr><td class="paramname">size</td><td>size of buf </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
<a id="ga9b20292fd4af78e4b811fd336cc0881b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b20292fd4af78e4b811fd336cc0881b">&#9670;&nbsp;</a></span>FOTAAgent_writeEnd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_writeEnd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logically end writes and end the state machine. </p>
<p>Other than ending the internal state machine, this function will also flash any remaining data that remains to be programmed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to FOTA Agent handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
<a id="ga0575464a87b442e9021cb90c9ad2daa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0575464a87b442e9021cb90c9ad2daa5">&#9670;&nbsp;</a></span>FOTAAgent_getFLSOPSKDHandle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t FOTAAgent_getFLSOPSKDHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFOTAAgent__Handle.html">FOTAAgent_Handle</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFLSOPSKD__Handle.html">FLSOPSKD_Handle</a> *&#160;</td>
          <td class="paramname"><em>flsopskdHandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrive FLSOPSKD handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>[in] pointer to FOTA Agent handle </td></tr>
    <tr><td class="paramname">flsopskdHandle</td><td>[out] pointer to flsopskdHandle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SystemP_FAILURE </dd>
<dd>
SystemP_SUCCESS </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
