<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM263Px MCU+ SDK: Configuring OptiFlash various IP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="AM263Px MCU+ SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM263Px MCU+ SDK
   &#160;<span id="projectnumber">11.00.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('OPTIFLASH_CONFIGURE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Configuring OptiFlash various IP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md606">Introduction</a></li>
<li class="level1"><a href="#autotoc_md607">How to configure RL2?</a></li>
<li class="level1"><a href="#autotoc_md608">How to configure FLC.</a></li>
<li class="level1"><a href="#autotoc_md609">How to configure RAT.</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_developer_guides_optiflash_configuration"></a></p>
<h1><a class="anchor" id="autotoc_md606"></a>
Introduction</h1>
<p>This document gives a basic introduction to configuring different IPs, which is part of OptiFlash.</p>
<h1><a class="anchor" id="autotoc_md607"></a>
How to configure RL2?</h1>
<p>RL2 is, basically, an L2 cache controller. Highlighting the <code>controller</code> keyword here, because, unlike the L1 cache controller, which has internal cache memory, RL2 does not have internal cache memory. RL2 needs to be configured, and a part of On-chip SRAM needs to be assigned for RL2 cache memory.</p>
<p>There are three configurations that are largely needed:</p><ol type="1">
<li>Size of the L2 cache</li>
<li>Range of memory to cache</li>
<li>SRAM memory region to be used as L2 cache memory This SRAM memory region is an L2 remote region.</li>
</ol>
<p>Before configuring RL2, 1st requirement is to allocate a part of L2 memory as cache bank. To do this:</p><ul>
<li>In syscfg, Open <code>Memory Region</code>:</li>
</ul>
<p> <style>div.image img[src="optiflash_rl2_config_memory_region_open.png"]{width:50%}</style> </p><div class="image">
<img src="optiflash_rl2_config_memory_region_open.png" alt=""/>
</div>
<ul>
<li>Add new Memory region with the following details:</li>
</ul>
<p> <style>div.image img[src="optiflash_rl2_config_memory_region_new.png"]{width:50%}</style> </p><div class="image">
<img src="optiflash_rl2_config_memory_region_new.png" alt=""/>
</div>
<p>Make sure that size of the memory region is more than the size of the cache that is required for the application. Here, since it is required to have 128KB of application, therefore, the size of this memory region <code>L2_CACHE_BANK</code> has been set to 128KB.</p>
<p>Now once memory region has been created, RL2 can now be configured and its configuration can be done from syscfg as follows:</p>
<p> <style>div.image img[src="syscfg.png"]{width:50%}</style> </p><div class="image">
<img src="syscfg.png" alt=""/>
</div>
<p>By selecting <code>Layer2 Cache</code> from the <code>OptiFlash</code> drop-down, the above configurations come:</p>
<ol type="1">
<li>Make sure the above module is enabled. This helps in enabling and disabling Layer 2 caches without losing configurations.</li>
<li><code>External Flash cached region start address</code> and <code>External Flash cached region end address</code> define the range of addresses that need to be cached in L2 Cache.</li>
<li><code>Size of cache</code> is the size of L2 cache that is required to be configured.</li>
<li>After this, select the memory region where the L2 cache bank should be located. This should be L2 memory (In case of am263px, L2 memory is OCRAM). The memory region that is selected is <code>L2_CACHE_BANK</code> which was configured above. Similarly, if some other cache size has to be selected then the size of the cache bank has to be changed correspondingly.</li>
</ol>
<h1><a class="anchor" id="autotoc_md608"></a>
How to configure FLC.</h1>
<p>FLC is a simplified DMA. To configure FLC, in syscfg, it can be done by clicking to the <code>Fast Local Copy</code> nav menu item under OptiFlash drop down menu at the bottom.</p>
<p> <style>div.image img[src="flc_syscfg_initial.png"]{width:50%}</style> </p><div class="image">
<img src="flc_syscfg_initial.png" alt=""/>
</div>
<p>Use <code>Add</code> button to to add FLC instances. For am263px case, there are a total of 4 FLC instances per R5 core. All info that needs to be given is source address, destination address and size. Make sure that all these fields are 4K aligned.</p>
<h1><a class="anchor" id="autotoc_md609"></a>
How to configure RAT.</h1>
<p>Region base address translation or RAT can be configured using the following fields.</p>
<p> <style>div.image img[src="rat_syscfg.png"]{width:50%}</style> </p><div class="image">
<img src="rat_syscfg.png" alt=""/>
</div>
<p><code>Region Size</code>: Size of RAT region.</p>
<p><code>Region Base Address (hex)</code>: Size aligned base address</p>
<p><code>Region Translated Address (hex)</code>: Size aligned translated address </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
